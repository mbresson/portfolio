!function(a){function b(){var b=a("body").attr("id");switch(a("header .menu-toggle").click(n),b){case"page-contact":c();break;case"page-works":d();break;case"page-work":e()}}function c(){var b=a("#form-contact");b.validate({errorClass:"invalid",errorPlacement:function(){},submitHandler:function(b){return i(a(b)),!1}})}function d(){a(".filters select").each(function(){a(this).change(m),a(this).change()})}function e(){if(a("body").hasClass("category-photo")){var b=a("a.album-link").data("link");a("a.album-link").magnificPopup({items:b,gallery:{enabled:!0,preload:[1,3]},type:"image",retina:{ratio:2}})}else a("body").hasClass("category-programming")&&a(".screenshots").magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0,preload:[1,3]}})}function f(b){var c=b.find("input, select, textarea"),d={};return c.each(function(){d[a(this).attr("name")]=a(this).val()}),d}function g(a,b){a.slideUp(300,function(){b.removeClass("hidden")}).removeClass("waiting")}function h(b,c){b.find("input.invalid, textarea.invalid").removeClass("invalid"),a.inArray("mq",c)&&(b.find('label[for="fi_mq"] img').attr("src","data:image/png;base64,"+c.mq),delete c.mq),a.each(c,function(a,c){b.find('input[name="'+c+'"], textarea[name="'+c+'"]').val("").addClass("invalid")}),b.removeClass("waiting").find("input, textarea").attr("readonly",!1),b.find('input[name="'+c[0]+'"]').focus()}function i(b){var c=f(b);return null===c?!1:(c.form_id=b.attr("id"),b.addClass("waiting"),b.find("input, textarea").attr("readonly",!0),a.ajax({url:"contact/post",error:j,success:k,timeout:j,type:"POST",dataType:"json",data:c}),!1)}function j(){a("form.waiting").slideUp(300,function(){a("#failure_connection").removeClass("hidden")}).removeClass("waiting")}function k(b){var c=a("form.waiting");if(b.ok)g(c,a(".hidden.success"));else switch(b.error){case"session expired":g(c,a("#failure_session"));break;case"server":g(c,a("#failure_server"));break;case"missing fields":h(c,b.missing);break;case"invalid fields":h(c,b.invalid)}}function l(a){var b=a.attr("class"),c="filter-name-",d=b.search(c)+c.length,e=b.substr(d),f=e.search(" ");return 0>f?e:e.substr(0,f)}function m(){var b=l(a(this));"category"===b&&(a(".category-description").hide(),a(".category-description.category-"+a(this).val()).show());var c=a(".filters select").map(function(){var b=a(this).val();if("all"!==b){var c=l(a(this));return"."+c+"-"+b}}).get().join(""),d=a(".showcase");return""===c?void d.children("li").fadeIn(200):(0===d.children("li"+c).length?a("#no_result").show():a("#no_result").hide(),d.children("li:not("+c+")").hide(),void d.children("li"+c).fadeIn(200))}function n(){a("nav").slideToggle(300)}a(document).ready(b)}(jQuery);